<h1>Character Creator</h1>
<div class="card me-2">
    <p>To create your character, you must chose a name, a race and a class. Then you have 27 points to give between the six stats. Each stat must be between 8 and 15.</p>
    <div class="card me-1 mb-1">
        <form class="d-flex flex-column align-items-center" [formGroup]="characterCreaterForm" (ngSubmit)="onSubmit()">
            <div class="inputs">
                <div class="d-flex justify-content-between align-items-center">
                    <label for="name">Name for character : </label>
                    <input type="text" maxlength="50" id="name" [formControl]="name">
                </div>
                @if(name.touched && name.getError('required')) {
                    <div>
                        <small class="text-danger">Character must have a name</small>
                    </div>
                }
                @if(name.touched && (name.getError('minlength') || name.getError('maxlength'))) {
                    <div>
                        <small class="text-danger">Character name must be between 2 and 50 characters</small>
                    </div>
                }
                <div class="d-flex justify-content-between align-items-center">
                    <label for="race">Select a race : </label>
                    <app-input-autocomplete-list class="input" [formControl]="race" [elements]="races" (textTyped)="loadRaceFilter($event)" />
                </div>
                @if(race.touched && (race.getError('required')  || invalidRace)) {
                    <div>
                        <small class="text-danger">Choose an existing race</small>
                    </div>
                }
                <div class="d-flex justify-content-between align-items-center">
                    <label for="class">Select a class : </label>
                    <app-input-autocomplete-list class="input" [formControl]="class" [elements]="classes" (textTyped)="loadClassFilter($event)" />
                </div>
                @if(class.touched && (class.getError('required') || invalidClass)) {
                    <div>
                        <small class="text-danger">Choose an existing class</small>
                    </div>
                }
            </div>
            <div>
                <label for="str">STR :</label>
                <input type="number" id="str" max="15" min="8" value="8" [formControl]="str" (change)="onChange()">
                <label for="dex">DEX : </label>
                <input type="number" id="dex" max="15" min="8" value="8" [formControl]="dex" (change)="onChange()">
                <label for="cha">CHA :</label>
                <input type="number" id="cha" max="15" min="8" value="8" [formControl]="cha" (change)="onChange()">
            </div>
            <div>
                <label for="int">INT : </label>
                <input type="number" id="int" max="15" min="8" value="8" [formControl]="int" (change)="onChange()">
                <label for="con">CON :</label>
                <input type="number" id="con" max="15" min="8" value="8" [formControl]="con" (change)="onChange()">
                <label for="wis">WIS : </label>
                <input type="number" id="wis" max="15" min="8" value="8" [formControl]="wis" (change)="onChange()">
            </div>
            @if(str.touched && (str.getError('min') || str.getError('max') || str.getError('required'))) {
                <div>
                    <small class="text-danger">STR mut be between 8 and 15</small>
                </div>
            }
            @if(dex.touched && (dex.getError('min') || dex.getError('max') || dex.getError('required'))) {
                <div>
                    <small class="text-danger">DEX mut be between 8 and 15</small>
                </div>
            }
            @if(cha.touched && (cha.getError('min') || cha.getError('max') || cha.getError('required'))) {
                <div>
                    <small class="text-danger">CHA mut be between 8 and 15</small>
                </div>
            }
            @if(int.touched && (int.getError('min') || int.getError('max') || int.getError('required'))) {
                <div>
                    <small class="text-danger">INT mut be between 8 and 15</small>
                </div>
            }
            @if(con.touched && (str.getError('min') || con.getError('max') || con.getError('required'))) {
                <div>
                    <small class="text-danger">CON mut be between 8 and 15</small>
                </div>
            }
            @if(wis.touched && (wis.getError('min') || wis.getError('max') || wis.getError('required'))) {
                <div>
                    <small class="text-danger">WIS mut be between 8 and 15</small>
                </div>
            }
            <div>
                <p>Points left : {{ availablePoints }}/27</p>
            </div>
            @if(availablePoints > 0) {
                <div>
                    <small>You still have points to give</small>
                </div>
            } @else if(availablePoints < 0) {
                <div>
                    <small class="text-danger">You exceed the maximum points you can give</small>
                </div>
            }
            <button class="btn btn-primary m-2" type="submit" [disabled]="invalidRace || characterCreaterForm.invalid || availablePoints != 0">CREATE CHARACTER</button>
        </form>
    </div>
</div>
